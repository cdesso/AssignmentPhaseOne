<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  </head>
<div class="container">
    <h3 class="text-center text-info">My Groups</h3>
    <div class="groups">
        <button *ngFor="let group of userGroups" (click)="findChannels(group)" class="btn btn-info btn-md">{{group}}</button>
        <button *ngIf="role == 'GA' || role == 'SA'" (click)="addGroup()" class="btn btn-info btn-md">+</button>
    </div>
    

    <form id="joinChannel" class="form" method="post" *ngIf="userChannels[0]">
        <div class="form-group" id="channels">            
            <label for="JoinChannel" class="text-info">Choose channel: </label>
            <select  [(ngModel)]="JoinChannel" name="JoinChannel" id="JoinChannel" class="form-control" style="width: 50%;">
                <option *ngFor="let channel of userChannels" value="{{channel}}">{{channel}}</option>
            </select>
         
            <span id="channelButton">
                <button (click)="joinChannel()" class="btn btn-info btn-md">Join</button>
                <button *ngIf="(role == 'GA' || role == 'SA') && (JoinChannel != '')" (click)="deleteChannel()" class="btn btn-info btn-md">Delete Channel</button>
                <button *ngIf="role == 'GA' || role == 'SA'" (click)="addChannel()" class="btn btn-info btn-md">Create New Channel</button>
            </span>
        </div>

        <div class="form-group">
            <form class="form-group" method="post" *ngIf="role == 'GA' || role == 'SA'">
                <select  [(ngModel)]="newInviteGroup" name="newInviteGroup" id="newInviteGroup" class="form-control" style="width: 50%;">
                    <option *ngFor="let user of inviteUsers" value="{{user}}">{{user}}</option>
                </select>
                <button class="inviteGroup" (click)="inviteGroup(activeGroup)" class="btn btn-info btn-md">Invite to {{activeGroup}}</button>
            </form>
        </div>

        <div class="form-group renameForm">
            <form class="form-group" method="post" *ngIf="role == 'GA' || role == 'SA'">
                <input type="text" [(ngModel)]="newGroupName" placeholder="{{activeGroup}}" name="groupName" class="form-control" id="renameBox">
                <button (click)="renameGroup()" class="btn btn-info btn-md">Rename Group</button>
            </form>
        </div>
    </form>
    <div class="GroupAdmin" *ngIf="role == 'GA' || role == 'SA'">Group Admin access
        <div class="newUser">
            <div class="newUserButton">
                <button (click)="newUserForm()" class="btn btn-info btn-md">New User</button>
            </div>
            <form id="userForm" class="form" method="post">
                <div class="form-group">
                    <label for="NewUsername" class="text-info">Username:</label>
                    <input type="text" [(ngModel)]="NewUsername" name="NewUsername" id="NewUsername" class="form-control">
                    <span class="error">{{UserError}}</span>
                </div>
                

                <div class="form-group">
                    <label for="NewEmail" class="text-info">Email:</label>
                    <input type="text" [(ngModel)]="NewEmail" name="NewEmail" id="NewEmail" class="form-control">
                    <span class="error">{{EmailError}}</span>
                </div>

                <div class="form-group">
                    <label for="NewPassword" class="text-info">Password:</label>
                    <input type="password"  [(ngModel)]="NewPassword" name="NewPassword" id="NewPassword" class="form-control">
                </div>
                <div class="form-group">
                    <label for="NewPassword2" class="text-info">Confirm Password:</label>
                    <input type="password"  [(ngModel)]="NewPassword2" name="NewPassword2" id="NewPassword2" class="form-control">
                    <span class="error">{{PasswordError}}</span>
                </div>

                <div class="form-group" *ngIf=" role == 'SA' ">
                    <p class="text-info" style="font-weight: bold;">Make Group Admin?</p>
                    <div class="form-check">
                        <input class="form-check-input" [(ngModel)]="NewRole" type="radio" id="yes" name="newGA" value="GA">
                        <label class="form-check-label" for="yes">Yes</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" [(ngModel)]="NewRole" type="radio" id="no" name="newGA" value="U" checked="checked">
                        <label class="form-check-label" for="no">No</label>
                    </div>
                </div>

                <div class="form-group">
                    <button (click)="addUser()" class="btn btn-info btn-md">Create</button>
                </div>
            </form>
            <div class="SA" *ngIf="role == 'SA'">
                <div class="del">
                    <button (click)="findUsers()" class="btn btn-info btn-md">Admin</button>
                    <div class="userTable" *ngIf="UsersArray[0]">
                        <table>
                            <tr *ngFor="let user of UsersArray">
                                <td>{{user.username}}</td>
                                <td><a (click)="upgradeUser(user.id)" class="btn btn-info btn-sm">Make super admin</a></td>
                                <td><a (click)="delUser(user.id)" class="glyphicon glyphicon-trash" id="deleteUser"></a></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <p *ngIf="role == 'GA' || role == 'SA' || role == 'GS'">Group assiss access</p>
    {{role}}
</div>

